@model IEnumerable<purchaseTracking.Models.eTALENT.EPDO_MASTER_DATA>
@{
    ViewBag.Title = "Información Personal";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@{
    decimal temp_dias = 0;
    decimal temp_total = 0;
    decimal temp_gozados = 0;
    
}

@using purchaseTracking.Models.eTALENT

<style>
    body {
        background-color: #F4F6F9;
    }

    .card-custom {
        background: #FFFFFF;
        border: 1px solid #DDE3E8;
        border-radius: 14px;
        padding: 28px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        margin-bottom: 30px;
    }

    .form-control {
        border: 1px solid #DDE3E8;
        background: #F9FBFA;
        border-radius: 10px;
        height: 50px;
        font-size: 15px;
        transition: all 0.3s ease;
    }

        .form-control:focus {
            border-color: #1E7F5C;
            box-shadow: 0 0 0 0.15rem rgba(30,127,92,0.15);
            background: #FFFFFF;
        }

    label {
        color: #4A4A4A;
        font-weight: 600;
    }

    .titulo-seccion {
        color: #1E7F5C;
        font-weight: 700;
        letter-spacing: 0.5px;
    }

    hr {
        border-top: 2px solid #E8F5F0;
        opacity: 1;
    }

</style>

<div class="container-fluid">
    <div class="row justify-content-md-center">
        <div class="col-md-11 mt-4">

            @foreach (var item in Model)
            {
 
                int edadCalculada = 0;
                DateTime fechaNacimientoTemp;

                if (!string.IsNullOrEmpty(item.FECHA_NACIMIENTO) &&
                    DateTime.TryParse(item.FECHA_NACIMIENTO, out fechaNacimientoTemp))
                {
                    edadCalculada = DateTime.Now.Year - fechaNacimientoTemp.Year;

                    if (fechaNacimientoTemp.Month > DateTime.Now.Month ||
                        (fechaNacimientoTemp.Month == DateTime.Now.Month &&
                         fechaNacimientoTemp.Day > DateTime.Now.Day))
                    {
                        edadCalculada--;
                    }
                }


                <fieldset disabled>
                  
                    <div class="card-custom">
                        <h4 class="titulo-seccion text-center">Mi Información Personal</h4>
                        <hr />

                        <div class="row">

                            <div class="col-12 col-md-6 mb-4">
                                <div class="d-flex align-items-center">
                                    <label style="width:180px; font-weight:600;">
                                        Nombre:
                                    </label>
                                    <input type="text" class="form-control"
                                           value="@item.NOMBRE_COMPLETO">
                                </div>
                            </div>

                            <div class="col-12 col-md-6 mb-4">
                                <div class="d-flex align-items-center">
                                    <label style="width:180px; font-weight:600;">
                                        Fecha Ingreso:
                                    </label>
                                    <input type="text" class="form-control"
                                           value="@item.FECHA_INGRESO">
                                </div>
                            </div>

                            <div class="col-12 col-md-6 mb-4">
                                <div class="d-flex align-items-center">
                                    <label style="width:180px; font-weight:600;">
                                        Puesto:
                                    </label>
                                    <input type="text" class="form-control"
                                           value="@item.PLAZA">
                                </div>
                            </div>

                            <div class="col-12 col-md-6 mb-4">
                                <div class="d-flex align-items-center">
                                    <label style="width:180px; font-weight:600;">
                                        Profesión:
                                    </label>
                                    <input type="text" class="form-control"
                                           value="@item.PROFESION">
                                </div>
                            </div>

                            <div class="col-12 col-md-6 mb-4">
                                <div class="d-flex align-items-center">
                                    <label style="width:180px; font-weight:600;">
                                        Edad:
                                    </label>
                                    <input type="text" class="form-control"
                                           value="@edadCalculada" readonly>


                                </div>
                            </div>


                            <div class="col-12 col-md-6 mb-4">
                                <div class="d-flex align-items-center">
                                    <label style="width:180px; font-weight:600;">
                                        Correo:
                                    </label>
                                    <input type="text" class="form-control"
                                           value="@item.MAIL_INTERNO">
                                </div>
                            </div>

                            <div class="col-12 col-md-6 mb-4">
                                <div class="d-flex align-items-center">
                                    <label style="width:180px; font-weight:600;">
                                        Celular:
                                    </label>
                                    <input type="text" class="form-control"
                                           value="@item.CELULAR">
                                </div>
                            </div>

                            <div class="col-12 col-md-6 mb-4">
                                <div class="d-flex align-items-center">
                                    <label style="width:180px; font-weight:600;">
                                        Jefe:
                                    </label>
                                    <input type="text" class="form-control"
                                           value="@item.JEFE_INMEDIATO">
                                </div>
                            </div>

                            <div class="col-12 col-md-6 mb-4">
                                <div class="d-flex align-items-center">
                                    <label style="width:180px; font-weight:600;">
                                        Unidad:
                                    </label>
                                    <input type="text" class="form-control"
                                           value="@item.UNIDAD">
                                </div>
                            </div>

                            <div class="col-12 col-md-6 mb-4">
                                <div class="d-flex align-items-center">
                                    <label style="width:180px; font-weight:600;">
                                        Dirección:
                                    </label>
                                    <input type="text" class="form-control"
                                           value="@item.DIRECCION">
                                </div>
                            </div>

                        </div>
                    </div>



                    <div class="card-custom">
                        <h4 class="titulo-seccion text-center">Vacaciones Disponibles</h4>
                        <hr />

                        @foreach (purchaseTracking.Models.eTALENT.VACACIONES itm in ViewBag.vacaciones)
                        {
                            temp_total = (int)Math.Round(itm.DIAS);
                            temp_gozados = (int)Math.Round(itm.GOZADOS);
                            temp_dias = (int)Math.Round(itm.DIAS - itm.GOZADOS);

                            <div class="row justify-content-center text-center">

                                <div class="col-md-3 mb-3">
                                    <label class="form-label d-block">Total Días</label>
                                    <input type="text" class="form-control text-center fw-bold"
                                           value="@temp_total"
                                           style="font-size:20px;">
                                </div>

                                <div class="col-md-3 mb-3">
                                    <label class="form-label d-block">Días Tomados</label>
                                    <input type="text" class="form-control text-center fw-bold"
                                           value="@temp_gozados"
                                           style="font-size:20px;">
                                </div>

                                <div class="col-md-3 mb-3">
                                    <label class="form-label d-block">Disponibles</label>
                                    <input type="text" class="form-control text-center fw-bold"
                                           value="@temp_dias"
                                           style="font-size:20px;">
                                </div>

                            </div>
                        }
                    </div>


                </fieldset>
            }

        </div>
    </div>
</div>